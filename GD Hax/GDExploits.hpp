#pragma once
#include "Macros.hpp"
#include "memory.hpp"

namespace stat_edits
{
	enum StatType : int
	{
		INVALID = -1,
		NONE,
		JUMPS,
		ATTEMPTS,
		COMPLETED_LEVELS,
		COMPLETED_ONLINE_LEVELS,
		DEMONS,
		STARS,
		MAP_PACKS_COMPLETED,
		COINS,
		PLAYERS_DESTROYED,
		LIKED_DISLIKED_LEVELS,
		RATED_LEVELS,
		USERCOINS,
		DIAMONDS,
		ORBS,
		COMPLETED_DAILY_LEVELS,
		SHADOW_SHARDS,
		POISON_SHARDS,
		FIRE_SHARDS,
		ICE_SHARDS,
		LAVA_SHARDS,
		BASEMENT_KEYS,
		TOTAL_ORBS_COLLECTED,
		/* too lazy to add the new ones to this list, theyre in the strings */
		TOTAL_COUNT = 31
	};

	static LPCSTR stat_types[] = {
		"TOTAL JUMPS",
		"TOTAL ATTEMPTS",
		"COMPLETED LEVELS",
		"COMPLETED ONLINE LEVELS",
		"DEMONS",
		"STARS",
		"MAP PACKS COMPLETED",
		"COINS",
		"PLAYERS DESTROYED",
		"LIKED/DISLIKED LEVELS",
		"RATED LEVELS",
		"USER COINS",
		"DIAMONDS",
		"ORBS",
		"COMPLETED DAILY LEVELS",
		"SHADOW SHARDS",
		"POISON SHARDS",
		"FIRE SHARDS",
		"ICE SHARDS",
		"LAVA SHARDS",
		"BASEMENT KEYS",
		"TOTAL ORBS COLLECTED",
		"EARTH SHARDS",
		"BLOOD SHARDS",
		"METAL SHARDS",
		"LIGHT SHARDS",
		"SOUL SHARDS",
		"MOONS",
		"DOUBLE DIAMONDS",
		"COMPLETED GAUNTLETS",
		"COLLECTED LIST REWARDS"
	};

	//struct StatInfo
	//{
	//	StatInfo* next[3];
	//	STRUCT_PAD(1);
	//	bool should_end;
	//	STRUCT_PAD(2);
	//	int num;
	//	int value;
	//};

	struct StatInfo {
		DWORD unk1;
		DWORD unk2;
		DWORD stat_table;
		DWORD unk3;
		DWORD unk4;
		DWORD hash_mask;
		DWORD hash_info_unk;
	};

	struct StatLinkedList {
		StatLinkedList* next;
		DWORD unk;
		StatType stat;
		DWORD value;
	};

	//int* get_stat_addr(driver& game, StatInfo* stat_info_addr, StatType stat);
	unsigned int hash_number(driver& game, StatInfo* instance, PUINT8 number);
	StatLinkedList* get_stat_addr(driver& game, StatInfo* stat_info_addr, StatType stat);
}
