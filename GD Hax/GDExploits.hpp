#pragma once
#include "Macros.hpp"
#include "memory.hpp"

// ----------- structs for hard unlocks ----------- //
struct CCString
{
	STRUCT_PAD(0x20);
	char string[0x10];
	unsigned int strlen;
	unsigned int unk;
};

// size: 0xC
struct CocosItem
{
	STRUCT_PAD(0x104);

	// union just in case more objects need to be added
	union {
		CCString* str_obj;
	};

	inline CocosItem* sub_delta(int delta) { return reinterpret_cast<CocosItem*>(reinterpret_cast<unsigned int>(this) - delta); }
};

struct CocosUnk
{
	CocosItem* items;
	STRUCT_PAD(0x8);
};

struct CocosDef
{
	CocosUnk* unk;
	int max;
	STRUCT_PAD(0xC);
	unsigned int delta;
};

struct unk_2
{
	STRUCT_PAD(0x108);
	CocosDef* def;
};

struct unk_1
{
	STRUCT_PAD(0x20);
	unk_2* next;
	int err_check;
};
// ------------------------------------------------ //

namespace stat_edits
{
	enum StatType : int
	{
		NONE,
		JUMPS,
		ATTEMPTS,
		COMPLETED_LEVELS,
		COMPLETED_ONLINE_LEVELS,
		DEMONS,
		STARS,
		MAP_PACKS_COMPLETED,
		COINS,
		PLAYERS_DESTROYED,
		LIKED_DISLIKED_LEVELS,
		RATED_LEVELS,
		USERCOINS,
		DIAMONDS,
		ORBS,
		COMPLETED_DAILY_LEVELS,
		SHADOW_SHARDS,
		POISON_SHARDS,
		FIRE_SHARDS,
		ICE_SHARDS,
		LAVA_SHARDS,
		BASEMENT_KEYS,
		TOTAL_ORBS_COLLECTED,
		TOTAL_COUNT = 22
	};

	static LPCSTR stat_types[StatType::TOTAL_COUNT] = {
		"JUMPS",
		"ATTEMPTS",
		"COMPLETED LEVELS",
		"COMPLETED ONLINE LEVELS",
		"DEMONS",
		"STARS",
		"MAP PACKS COMPLETED",
		"COINS",
		"PLAYERS DESTROYED",
		"LIKED/DISLIKED LEVELS",
		"RATED LEVELS",
		"USER COINS",
		"DIAMONDS",
		"ORBS",
		"COMPLETED DAILY LEVELS",
		"SHADOW SHARDS",
		"POISON SHARDS",
		"FIRE SHARDS",
		"ICE SHARDS",
		"LAVA SHARDS",
		"BASEMENT KEYS",
		"TOTAL ORBS COLLECTED"
	};

	struct StatInfo
	{
		StatInfo* next1;
		StatInfo* next2;
		StatInfo* next3;
		STRUCT_PAD(1);
		bool should_end;
		STRUCT_PAD(2);
		int num;
		int value;
	};

	int* get_stat_addr(driver& game, StatInfo* stat_info_addr, StatType stat);
}